<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>example</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>example</h1>
<div class="listing">
<div class="src-code"><ol><li><div class="src-line"><span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line"><span class="src-doc">/**</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;in&nbsp;5.x&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;add&nbsp;multiple&nbsp;translations&nbsp;in&nbsp;one&nbsp;version</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;the&nbsp;information&nbsp;which&nbsp;versions&nbsp;and&nbsp;language&nbsp;are&nbsp;translated&nbsp;can&nbsp;be&nbsp;put&nbsp;into&nbsp;the&nbsp;repository</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;via&nbsp;a&nbsp;translation&nbsp;info.&nbsp;THis&nbsp;approach&nbsp;assumes&nbsp;that&nbsp;the&nbsp;acual&nbsp;translation&nbsp;process&nbsp;is&nbsp;done</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;via&nbsp;a&nbsp;workflow&nbsp;engine.&nbsp;By&nbsp;storing&nbsp;the&nbsp;source&nbsp;version&nbsp;and&nbsp;source&nbsp;language&nbsp;it&nbsp;is&nbsp;possible</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;to&nbsp;trigger&nbsp;new&nbsp;translation&nbsp;workflows&nbsp;if&nbsp;fields&nbsp;in&nbsp;the&nbsp;source&nbsp;language&nbsp;have&nbsp;changed.</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*/</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;load&nbsp;the&nbsp;source&nbsp;version&nbsp;info&nbsp;of&nbsp;a&nbsp;content&nbsp;object</span></div></li>
<li><div class="src-line"><span class="src-var">$versionInfo&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodloadVersionInfoById">loadVersionInfoById</a><span class="src-sym">(</span><span class="src-var">$CONTENT_ID</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;create&nbsp;a&nbsp;draft&nbsp;from&nbsp;the&nbsp;before&nbsp;published&nbsp;content</span></div></li>
<li><div class="src-line"><span class="src-var">$draft&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><span class="src-id">createDraftFromVersion</span><span class="src-sym">(</span><span class="src-var">$versionInfo</span><span class="src-sym">-&gt;</span><span class="src-id">contentInfo</span><span class="src-sym">,</span><span class="src-var">$versionInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-doc">/**</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;Translate&nbsp;one&nbsp;language</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*/</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../ezp-PublicAPI-Values/TranslationInfo.html">TranslationInfo</a></span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceLanguage&nbsp;</span>=&nbsp;<span class="src-str">'eng-US'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceVersion&nbsp;</span>=&nbsp;<span class="src-var">$versionInfo</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationLanguage&nbsp;</span>=&nbsp;<span class="src-str">'ger-DE'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationVersion&nbsp;</span>=&nbsp;<span class="src-var">$draft</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$translation&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodnewTranslation">newTranslation</a><span class="src-sym">(</span><span class="src-var">$tranlationInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translation</span><span class="src-sym">-&gt;</span><span class="src-id">fields</span><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'Titel'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;.....</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$draft&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodtranslateVersion">translateVersion</a><span class="src-sym">(</span><span class="src-var">$translation</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;publish&nbsp;the&nbsp;version</span></div></li>
<li><div class="src-line"><span class="src-var">$newPublishedVersion&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodpublishDraft">publishDraft</a><span class="src-sym">(</span><span class="src-var">$draft</span><span class="src-sym">-&gt;</span><span class="src-id">versionInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-doc">/**</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*&nbsp;Translate&nbsp;more&nbsp;than&nbsp;one&nbsp;language&nbsp;at&nbsp;once&nbsp;(low&nbsp;level)</span></div></li>
<li><div class="src-line"><span class="src-doc">&nbsp;*/</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$versionUpdate&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../ezp-PublicAPI-Values/VersionUpdate.html">VersionUpdate</a></span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$versionUpdate</span><span class="src-sym">-&gt;</span><span class="src-id">fields</span><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'ger-DE'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'Titel'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;...</span></div></li>
<li><div class="src-line"><span class="src-var">$versionUpdate</span><span class="src-sym">-&gt;</span><span class="src-id">fields</span><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'fra-FR'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'Titre'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-comm">//&nbsp;..</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$draft&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodupdateVersion">updateVersion</a><span class="src-sym">(</span><span class="src-var">$draft</span><span class="src-sym">,</span><span class="src-var">$versionUpdate</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$newPublishedVersion&nbsp;</span>=&nbsp;<span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodpublishDraft">publishDraft</a><span class="src-sym">(</span><span class="src-var">$draft</span><span class="src-sym">-&gt;</span><span class="src-id">versionInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$translationInfo&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../ezp-PublicAPI-Values/TranslationInfo.html">TranslationInfo</a></span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceLanguage&nbsp;</span>=&nbsp;<span class="src-str">'eng-US'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceVersion&nbsp;</span>=&nbsp;<span class="src-var">$versionInfo</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationLanguage&nbsp;</span>=&nbsp;<span class="src-str">'ger-DE'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationVersion&nbsp;</span>=&nbsp;<span class="src-var">$newPublishedVersion</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodaddTranslationInfo">addTranslationInfo</a><span class="src-sym">(</span><span class="src-var">$translationInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$translationInfo&nbsp;</span>=&nbsp;<span class="src-key">new&nbsp;</span><span class="src-id"><a href="../ezp-PublicAPI-Values/TranslationInfo.html">TranslationInfo</a></span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceLanguage&nbsp;</span>=&nbsp;<span class="src-str">'eng-US'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">sourceVersion&nbsp;</span>=&nbsp;<span class="src-var">$versionInfo</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationLanguage&nbsp;</span>=&nbsp;<span class="src-str">'fra-FR'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><span class="src-var">$translationInfo</span><span class="src-sym">-&gt;</span><span class="src-id">destinationVersion&nbsp;</span>=&nbsp;<span class="src-var">$newPublishedVersion</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&nbsp;</div></li>
<li><div class="src-line"><span class="src-var">$contentService</span><span class="src-sym">-&gt;</span><a href="../ezp-PublicAPI-Interfaces/ContentService.html#methodaddTranslationInfo">addTranslationInfo</a><span class="src-sym">(</span><span class="src-var">$translationInfo</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol></div>
</div>
	<p class="notes" id="credit">
		Documentation generated on Tue, 17 Jan 2012 16:03:45 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.4</a>
	</p>
	</body>
</html>